% \input utf8-t1
\documentclass[12pt,titlepage,a4paper]{extarticle}

% ------ PACKAGES ------

\usepackage[czech]{babel}
\usepackage[utf8]{inputenc}
\usepackage[paper=a4paper]{geometry} % odsazení a velikosti stránek
\usepackage[bookmarksopen,bookmarks,pdfauthor={Josef Kolář},pdftitle={PYBOTS - hra pro programátory},pdfsubject={herní server PYBOTS pro programátory},pdfkeywords={python,game,programmers,flask,maze,bots}]{hyperref} % odkazy
\usepackage{listings} % výpisy zdrojových kódů
\usepackage{color} % barvy
\usepackage{xcolor} % vytváření barev
\usepackage{newverbs}
\usepackage{todonotes} % todo značky
\usepackage{graphicx} % načítání grefiky
\usepackage{float} % podpora pro figure s H pozicí
\usepackage{lipsum} % dummy text
\usepackage{svg} % inludesvg
\usepackage{caption} % vlastní styly pro caption
\usepackage{wrapfig} % figure v textu
\usepackage{titling} % theauthor, thetitle
\usepackage{fancyhdr} % zápatí, záhlaví
\usepackage{lastpage} % lastpage label
\usepackage{tabularx} % pro responzivni tabulky
\usepackage{array} % pro tabulkové zápis
\usepackage[verb]{collcell} % pro sloupce s makrem
\usepackage{bookmark} % nenutnost spouštět dcakrát pro korektní reference

% ------ CONFIGURATION ------

\colorlet{violet}{blue!80!red}
\colorlet{lightgray}{gray!5}

\colorlet{jsonnumber}{blue}
\colorlet{jsonpunct}{red}
\colorlet{jsondelim}{violet}

% default width of svg
\setsvg{width=.5\textwidth}
\graphicspath{ {images/} }

% reset ref section names
\def\sectionautorefname{}
\def\subsectionautorefname{}
\def\subsubsectionautorefname{}
\def\tableautorefname{}

\renewcommand\lstlistlistingname{Seznam zdrojových kódů}
\renewcommand\lstlistingname{Zdrojový kód}

\lhead{Praktická zkouška z odborných předmětů - \thetitle}
\chead{}
\rhead{}
\lfoot{}
\cfoot{}
\rfoot{Strana \thepage \hspace{1pt} z \pageref*{LastPage}}
\renewcommand{\headrulewidth}{2pt}
\renewcommand{\footrulewidth}{.5pt}
\renewcommand{\arraystretch}{1.2}

% ------ CUSTOM COMMANDS ------

% \ic for inline code
\makeatletter
\newcommand\ic[1][green]{%
    \@testopt{\@ic{#1}}{-#1}% Handle second optional argument
}
\def\@ic#1[#2]{%
    \Collectverb{\@@ic{#1}{#2}}%
}
\def\@@ic#1#2#3{%
    \fcolorbox{white}{lightgray}{\lstinline[basicstyle=\ttfamily\color{violet},breaklines=true]|#3|}%
}
\newcommand{\icmacro}[1]{\fcolorbox{white}{lightgray}{\lstinline[basicstyle=\ttfamily\color{violet},breaklines=true]|#1|}}
\makeatother

% ref as <number of section> <title of section>
\newcommand*{\fullref}[1]{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}}

\newenvironment{bottompar}{\par\vspace*{\fill}}{\clearpage}

\newcolumntype{I}{>{\collectcell\ic}l<{\endcollectcell}}

% ------ LISTINGS SETUP ------

\lstset{
    language=Python,
    frameround=fttf,
    breaklines=true,
    keywordstyle=\color{violet!50!red}\ttfamily,
    basicstyle=\color{violet},
    numberstyle=\color{black},
    backgroundcolor=\color{white},
    frame=single,
    tabsize=4,
    breaklines=true,
    captionpos=t,
    xleftmargin=\fboxsep,
    xrightmargin=-\fboxsep,
    numberstyle=\scriptsize,
    numbersep=6pt,
    numbers=left,
}
\DeclareCaptionFormat{listing}{%
	\colorlet{currentcolor}{.}%
	{\color{violet}{\framebox[\textwidth+\fboxsep+\fboxsep+1pt]{\color{currentcolor}#1#2#3}}}%
}
\captionsetup[lstlisting]{format=listing, singlelinecheck=false}

\lstdefinelanguage{json}{
    basicstyle=\color{violet},
    numberstyle=\scriptsize,
    numbersep=8pt,
    numbers=left,
    breaklines=true,
    frame=single,
    %backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{jsonnumber}0}}}{1}
      {1}{{{\color{jsonnumber}1}}}{1}
      {2}{{{\color{jsonnumber}2}}}{1}
      {3}{{{\color{jsonnumber}3}}}{1}
      {4}{{{\color{jsonnumber}4}}}{1}
      {5}{{{\color{jsonnumber}5}}}{1}
      {6}{{{\color{jsonnumber}6}}}{1}
      {7}{{{\color{jsonnumber}7}}}{1}
      {8}{{{\color{jsonnumber}8}}}{1}
      {9}{{{\color{jsonnumber}9}}}{1}
      {:}{{{\color{jsonpunct}{:}}}}{1}
      {,}{{{\color{jsonpunct}{,}}}}{1}
      {\{}{{{\color{jsondelim}{\{}}}}{1}
      {\}}{{{\color{jsondelim}{\}}}}}{1}
      {[}{{{\color{jsondelim}{[}}}}{1}
      {]}{{{\color{jsondelim}{]}}}}{1},
}

% ------ HYPERREF SETUP ------
\hypersetup{
	colorlinks,
	linkcolor={red!50!black},
	citecolor={blue!50!black},
	urlcolor={blue!80!black},
}

\begin{document}

\title{PYBOTS - hra pro programátory}
\author{Josef Kolář}
\date{\today}

\input{_titulek_dmp.tex}
% \input{_titulek_soc.tex}

\thispagestyle{empty}
\listoftodos

\input{_prohlaseni.tex}

\begin{abstract}
\todo{sepsat abstrakt}
\lipsum[2]
\end{abstract} 

\tableofcontents
\addcontentsline{toc}{section}{Obsah}

\newpage
\pagestyle{fancy}

\input{_teoreticky-uvod.tex}
\input{_implementace.tex}
\input{_technologie.tex}
\input{_metatechnologie.tex}
\input{_zaver.tex}
\newpage

\listoftables
\addcontentsline{toc}{section}{Seznam tabulek}

\lstlistoflistings
\addcontentsline{toc}{section}{Seznam zdrojových kódů}

\listoffigures
\addcontentsline{toc}{section}{Seznam obrázků}

\end{document}
